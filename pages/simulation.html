<!DOCTYPE html>
<html lang="pt-pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="/assets/images/icon.png" type="image/png" />
    <title>Laboratório Virtual de Física - Simulações</title>
    <link rel="stylesheet" href="../css/reset.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/simulation.css" />
    <link rel="stylesheet" href="../css/home.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div id="root">
      <header class="header">
        <div class="logo-setion">
          <a href="/" class="logo">
            <div class="abbreviation_logo">LVF</div>
            <img src="../assets/images/line_logo.png" alt="" class="line" />
            <div class="extension_logo">
              Lab Virtual <br />
              De Física
            </div>
          </a>
        </div>

        <div class="dropdown-setion" onclick="handleSidebar()">
          <button class="simulation-humburger" aria-label="Toggle Sidebar">
            <img
              src="../assets/images/close.svg"
              alt="ícone de fechar"
              class="icon-close show"
            />
            <svg
              class="humburger_svg"
              data-name="Layer 1"
              id="Layer_1"
              viewBox="0 0 48 48"
              xmlns="http://www.w3.org/2000/svg"
            >
              <title>Menu</title>
              <line class="cls-1" x1="1" x2="47" y1="10" y2="10" />
              <line class="cls-1" x1="1" x2="47" y1="24" y2="24" />
              <line class="cls-1" x1="1" x2="47" y1="38" y2="38" />
            </svg>
          </button>
        </div>
        <a href="/" class="home">
          <!-- Home icon SVG -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 576 512"
            width="16"
            height="16"
            fill="currentColor"
          >
            <path
              d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"
            />
          </svg>
          Home
        </a>
      </header>

      <!-- Add overlay for mobile sidebar -->
      <div
        id="sidebar-overlay"
        class="sidebar-overlay"
        onclick="handleSidebar()"
      ></div>

      <div class="section-container">
        <div id="sidebar" class="sidebar">
          <div class="header">
            <div class="_grade" data-grade="10" onclick="switchGrade(10)">
              10ª Classe
            </div>
            <div class="_grade" data-grade="11" onclick="switchGrade(11)">
              11ª Classe
            </div>
            <div class="_grade" data-grade="12" onclick="switchGrade(12)">
              12ª Classe
            </div>
          </div>

          <div class="units-group"></div>
        </div>

        <section class="simulation-container">
          <div class="guideline" id="guideline">
            <div class="guideline-header">
              <div class="guideline-header-title">
                <svg
                  class="bi bi-info-circle-fill guideline-icon-info"
                  fill="#207ED4"
                  height="16"
                  viewBox="0 0 16 16"
                  width="16"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"
                  />
                </svg>
                <h2 id="guideline-title" class="guideline-title">
                  Movimento Retilíneo Uniforme (MRU)
                </h2>
              </div>
              <button
                class="guideline-collapse-btn"
                onclick="handleGuidelineCollapse()"
                aria-label="Toggle guideline"
              >
                <svg
                  class="guideline-icon-collapse"
                  height="15px"
                  id="Layer_1"
                  style="enable-background: new 0 0 512 512"
                  version="1.1"
                  viewBox="0 0 512 512"
                  width="15px"
                  xml:space="preserve"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                >
                  <polygon
                    points="396.6,160 416,180.7 256,352 96,180.7 115.3,160 256,310.5 "
                  />
                </svg>
              </button>
            </div>
            <div id="guideline-content" class="guideline-content">
              <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odio
                iure fugiat inventore! Voluptatum ea rem possimus et illum
                eveniet facilis nostrum, quam odit repudiandae. Modi deserunt
                nemo praesentium quidem accusamus.
              </p>
            </div>
          </div>
          <div class="scene">
            <iframe
              id="simulation-frame"
              src=""
              frameborder="0"
              allowfullscreen="true"
              mozallowfullscreen="true"
              webkitallowfullscreen="true"
              title="Simulation"
            ></iframe>
          </div>
        </section>
      </div>

      <div class="mobile-controls">
        <button
          id="toggle-sidebar-mobile"
          class="mobile-btn"
          aria-label="Toggle Sidebar"
        >
          <!-- Bars icon SVG -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 448 512"
            width="16"
            height="16"
            fill="currentColor"
          >
            <path
              d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"
            />
          </svg>
        </button>
        <button
          id="toggle-guideline-mobile"
          class="mobile-btn"
          aria-label="Toggle Guidelines"
        >
          <!-- Info circle icon SVG -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 512 512"
            width="16"
            height="16"
            fill="currentColor"
          >
            <path
              d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"
            />
          </svg>
        </button>
      </div>
    </div>

    <script src="../js/main.js" defer type="module"></script>
    <script src="../js/router.js"></script>
    <script src="../js/simulation.js"></script>
    <script>
  
      // Handle window resize events
      window.addEventListener("resize", function () {
        // Adjust iframe height dynamically
        adjustIframeHeight();

        // Close sidebar on small screens when resizing larger
        if (
          window.innerWidth > 992 &&
          !document
            .getElementById("sidebar")
            .classList.contains("close-sidebar")
        ) {
          // Don't close sidebar on larger screens
        } else if (window.innerWidth <= 992) {
          // On smaller screens, make sure sidebar is closed by default
          document.getElementById("sidebar").classList.add("close-sidebar");
          document.getElementById("sidebar-overlay").classList.remove("active");
        }
      });

      // Function to adjust iframe height
      function adjustIframeHeight() {
        const container = document.querySelector(".simulation-container");
        const guideline = document.getElementById("guideline");
        const scene = document.querySelector(".scene");

        if (container && guideline && scene) {
          // Calculate available height
          const containerHeight = container.offsetHeight;
          const guidelineHeight = guideline.offsetHeight;
          const availableHeight = containerHeight - guidelineHeight - 20; // 20px for margins

          // Set minimum height
          scene.style.minHeight = Math.max(250, availableHeight) + "px";
        }
      }

      // Run on page load
      document.addEventListener("DOMContentLoaded", function () {
        adjustIframeHeight();
      });
    </script>
  </body>
</html>
